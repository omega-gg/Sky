#!/bin/sh
set -e

#--------------------------------------------------------------------------------------------------
# Settings
#--------------------------------------------------------------------------------------------------

ffmpeg="$PWD/bin/ffmpeg"

#--------------------------------------------------------------------------------------------------
# Syntax
#--------------------------------------------------------------------------------------------------

if [ $# != 3 -a $# != 4 ]; then

    echo "Usage: tempo <input> <output> <tempo> [volume]"

    exit 1
fi

#--------------------------------------------------------------------------------------------------
# Run
#--------------------------------------------------------------------------------------------------

if [ $# = 4 ]; then

    filter="rubberband=tempo=$3,volume=$4dB"
else
    filter="rubberband=tempo=$3"
fi

"$ffmpeg" -y -i "$1" -filter:a "$filter" "$2"
